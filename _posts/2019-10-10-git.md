---
layout: post
title: GitHubのプルリクをmergeする時に選べる3つのマージ方法
date: 2019-10-11 00:00:00 +0900
description: プルリクのレビュワーになった人がGitのログを見た時に、レビューがしやすいかどうかという観点で運用を見つめ直します。
tags: [git]
img: 2019/10/git_pr.png
---
[参考](https://qiita.com/ko-he-8/items/94e872f2154829c868df)

普段ソロ開発ばかりしているし、チーム開発は忙しくなりがちなんでGitLogなんて見ないですが、これも試して書き足します。

## Create a merge commit
絵でいうと右に曲がってるコミットログがこれです。
今回、mergeしてる感を出したかったのでユースケースが微妙ですが、ここで言いたいのは複数人開発をする時にやりやすくなりますよ、ということです。
今はmasterから伸びた線が1つですが、たとえばdevelopリポジトリを作って、それを起点に開発すれば大量のdevelop派生の線が出てきます。

## Rebase and merge
やることはmergeと似たようなものですが、こちらは順番を意識します。
レビューをする時に一本の線だけで見れるので、レビュアーがすごく楽になります。
あっちこっちに行って、最終的にどうなったんだっけ？というのを気にしなくて良くなります。

## Squash and merge
試したことがない[^1]ですが、参考ページを見るといいとこ取り？みたいな印象です。
Squashコマンド自体も個人開発だとあまり使う機会がないのですが、そういうのもあるよ、ということで。

## どうしてもRebaseしたい
チームでMergeではなくRebaseを採用している場合があります。
一人でやってる場合はMergeだろうがRebaseだろうが大したことはない（切り戻す事がない、あったとしても自分で全コードが把握できるため）ですが、チームでプロダクト開発をするとそうはいきません。

1. 手元のファイルを保持する
1. Masterをgit cloneし直す
1. 自分が書き換えた部分をやり直す、ファイルを上書きする[^2]

という手順で、再度Masterなりdevelopなりにpushすれば良いですが、見直す意味でも別ブランチを作ってPR/MRするのが見直しにもなって良いのではないかと思います。[^3]

## 注釈
[^1]: 【試したことがない】厳密には、やってみたけどよく分からなかったです。
[^2]: 【競合を起こした場合の再クローン、上書き】非推奨です。自分が書き換えた場所がどこだったか100%正確に把握する必要があるため、ヒューマンエラーの要因になりやすいです。
[^3]: 【別ブランチにpushして見直し】[実はこのresumeリポジトリもそのように運用しています。](https://github.com/shimajima-eiji/resume/pulls?q=is%3Apr+is%3Aclosed)
